<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Publication</title>
        <link rel="icon" href="images/favicon.svg" type="image/png">
        <link href="css/article-detail-page.css" rel="stylesheet">
        <link href="css/footer.css" rel="stylesheet">
        <link href="css/header.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>

    </head>
    <body>
        <header>
            <div class="menu">
                <div class="menu-left">
                    <a href="index.html"><img alt="" src="images/logo_long_blanc.svg" class="menu-logo" /></a>
                <a href="index.html"><img alt="" src="images/favicon.svg" class="menu-logo-mobile" /></a>
                    <div class="menu-link" id="menu-link">
                        <div class="options">
    
                            <div class="menu-option">
                                <div class="option-title">
                                    <p>Who we are</p>
                                    <img src="images/dropdown-arrow-menu.svg" alt="">
                                </div>
                                <div class="list-options">
                                    <a href="about-us.html">About us</a>
                                    <a href="about-us.html#team">Our team</a>
                                    <a href="about-us.html#clients">Partners</a>
                                </div>
                            </div>
    
                            <div class="menu-option">
                                <div class="option-title">
                                    <p>What we do</p>
                                    <img src="images/dropdown-arrow-menu.svg" alt="">
                                </div>
                                <div class="list-options">
                                    <a href="training.html">Training</a>
                                    <a href="services.html">Services</a>
                                    <a href="">Keynote</a>
                                </div>
                            </div>
    
                            <div class="menu-option">
                                <div class="option-title">
                                    <p>News</p>
                                    <img src="images/dropdown-arrow-menu.svg" alt="">
                                </div>
                                <div class="list-options">
                                    <a href="events.html">Events</a>
                                    <a href="publications.html">Publications</a>
                                    <a href="reports.html">In-depth analysis</a>
                                </div>
                            </div>
                        </div>
    
                        <div class="menu-global">
                            <a href="contact.html"><img src="images/footer-icon-phone.svg" alt="">Contact us</a>
                            <div class="lang-btn">
                                <img src="images/glob-icon.svg" alt="">
                                <select id="mobilLangDropdown" title="Choose a language">
                                    <option class="option" value="en">Global - EN</option>
                                    <option class="option" value="fr">Global - FR</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="menu-end">
                    <div class="menu-global">
                        <a href="contact.html">Contact us</a>
                        <select id="desktopLangDropdown" title="Choose a language">
                            <option class="option" value="en">Global - EN</option>
                            <option class="option" value="fr">Global - FR</option>
                        </select>
                    </div>
                    <div class="menu-button">
                        <img id="menu-search-icon" src="images/menu-search-icon.svg" alt="">
                        <img id="menu-open" src="images/menu-icon.svg" alt="">
                    </div>
                </div>
            </div>
        </header>
        <main>
            <section class="hero"></section>
            <section id="article-details">
                <!-- Les détails de l'article seront insérés ici -->
            </section>
            <button id="scrollToTopBtn" title="Go to top">↑</button>
            <footer>
                <div class="footer-content">
                    <div class="footer-left">
                        <img src="images/logo_long_blanc.svg" alt="Logo">
                        <h2>Subscribe</h2>
                        <p>Stay up to date with all our news by subscribing to our newsletter.</p>
                        <div class="newsletter-fil">
                            <input type="email" class="form-control newsletter-form" id="newsletterEmail"
                                placeholder="email address">
                            <button type="button" class="btn btn-outline-warning" id="registerButton">Submit</button>
                        </div>
                    </div>
                    <div class="footer-right">
                        <div class="permalinks">
                            <a href="contact.html">Contact us</a>
                            <a href="">FAQ</a>
                            <a href="">Privacy policy</a>
                            <a href="">Terms of use</a>
                        </div>
                        <div class="list-info">
                            <div class="info">
                                <p>Sahel Politica, Chamerstrasse 172, 6300 Zug</p>
                                <img alt="" class="icon-info-footer" src="images/footer-icon-location.svg">
                            </div>
                            <div class="info">
                                <p>info@sahelpolitica.ch</p>
                                <img alt="" class="icon-info-footer" src="images/footer-icon-email.svg">
                            </div>
                        </div>
    
                    </div>
                </div>
    
                <div class="copyright">
                    <h6><img src="images/copyright.svg" alt=""> sahel policica, 2024, All rights reserved</h6>
                    <div class="socials">
                        <a target="_blank" href="https://www.youtube.com/@SahelPolitica_A"><img alt="Youtube"
                                src="images/footer-youtube-icon.svg"></a>
                        <a target="_blank" href="https://x.com/SahelPolitica"><img alt="X"
                                src="images/footer-x-icon.svg"></a>
                        <a target="_blank" href="https://www.linkedin.com/company/sahelpolitica/"><img alt="Linkedin"
                                src="images/footer-linkedin-icon.svg"></a>
                    </div>
            </footer>
        </main>
        <script type="module">
            const menuIcon = document.getElementById('menu-open');
            const dropLink = document.getElementById('menu-link');
    
            const openIcon = 'images/menu-icon.svg';  // Image pour ouvrir le menu
            const closeIcon = 'images/menu-close.svg';  // Image pour fermer le menu
    
            menuIcon.addEventListener('click', function () {
                if (dropLink.classList.contains('active')) {
                    // Si le menu est déjà ouvert, applique l'animation de fermeture
                    dropLink.classList.remove('active');
                    dropLink.classList.add('hide');
    
                    // Attends la fin de l'animation (1s ici), puis masque complètement l'élément
                    setTimeout(function () {
                        dropLink.classList.remove('hide');
                        dropLink.style.display = 'none'; // Cache le menu après l'animation
                    }, 1000); // Temps de l'animation
    
                    // Change l'icône en "menu ouvert"
                    menuIcon.src = openIcon;
                } else {
                    // Si le menu est fermé, montre-le et applique l'animation d'ouverture
                    dropLink.style.display = 'flex'; // Affiche le menu avant l'animation
                    dropLink.classList.add('active');
    
                    // Change l'icône en "fermer"
                    menuIcon.src = closeIcon;
                }
            });
    
            // Sélectionner tous les menus dans .menu-link
            const menus = document.querySelectorAll('.menu-link .menu-option');
    
            // Ajouter un écouteur d'événement de clic pour chaque bouton
            menus.forEach(menu => {
                menu.addEventListener('click', function () {
                    // Si ce bouton est déjà actif, on le désactive (on retire 'active')
                    if (this.classList.contains('active')) {
                        this.classList.remove('active');
                    } else {
                        // Désactiver le bouton actif actuel s'il y en a un
                        const activeButton = document.querySelector('.other-filter .btn.active');
                        if (activeButton) {
                            activeButton.classList.remove('active');
                        }
                        // Activer le bouton cliqué
                        this.classList.add('active');
                    }
                });
            });
    
        </script>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
            import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
    
            const firebaseConfig = {
                apiKey: "API_KEY",
                authDomain: "sahelpolitica.firebaseapp.com",
                projectId: "sahelpolitica",
                storageBucket: "sahelpolitica.appspot.com",
                messagingSenderId: "11417703739",
                appId: "1:11417703739:web:882052b747e7b761bdd31e",
                measurementId: "G-WFFDBTWRKV"
            };
    
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
    
            async function fetchArticle(articleId) {
                const articleDetails = document.getElementById('article-details');
    
                try {
                    const docRef = doc(db, 'Articles', articleId);
                    const docSnap = await getDoc(docRef);
    
                    if (docSnap.exists()) {
                        const article = docSnap.data();
                        articleDetails.innerHTML = `
                            <img alt="" src="${article.imageUrl}" alt="${article.title}" style="width:100%; max-height:400px; object-fit:cover;">
                            <h1 class="langue-en">${article.title}</h1>
                            <h1 class="langue-fr">${article.titleFR}</h1>
                            <p class='article-content langue-en'>${article.content}</p>
                            <p class='article-content langue-fr'>${article.contentFR}</p>
                            <p class="langue-en"><strong>Author:</strong> ${article.author}</p>
                            <p class="langue-fr"><strong>Publié par:</strong> ${article.author}</p>
                            <p><strong>Date:</strong> ${new Date(article.date.seconds * 1000).toLocaleString()}</p>
                        `;
                    } else {
                        articleDetails.innerHTML = '<p>Article not found.</p>';
                    }
                } catch (error) {
                    console.error("Error fetching article: ", error);
                    articleDetails.innerHTML = '<p>Failed to load article.</p>';
                }
            }
    
            document.addEventListener('DOMContentLoaded', () => {
                const urlParams = new URLSearchParams(window.location.search);
                const articleId = urlParams.get('id');
                if (articleId) {
                    fetchArticle(articleId);
                } else {
                    document.getElementById('article-details').innerHTML = '<p>No article ID provided.</p>';
                }
            });
        </script>
        <script>
            // Affiche le bouton lorsque l'utilisateur fait défiler vers le bas de 20 pixels à partir du haut du document
            window.onscroll = function() { scrollFunction() };
        
            function scrollFunction() {
                const scrollToTopBtn = document.getElementById("scrollToTopBtn");
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    scrollToTopBtn.style.display = "block";
                } else {
                    scrollToTopBtn.style.display = "none";
                }
            }
        
            // Lorsque l'utilisateur clique sur le bouton, fait défiler vers le haut de la page
            document.getElementById("scrollToTopBtn").addEventListener("click", function() {
                document.body.scrollTop = 0; // Pour Safari
                document.documentElement.scrollTop = 0; // Pour Chrome, Firefox, IE et Opera
            });
        </script>
        <script src="js/indexJs.js"></script>
        <script src="js/script-language.js"></script>
    </body>
</html>