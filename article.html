<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Publication</title>
        <link rel="icon" href="images/favicon.png" type="image/png">
        <link href="css/article-detail-page.css" rel="stylesheet">
        <link href="css/footer.css" rel="stylesheet">
        <link href="css/header.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>

    </head>
    <body>
        <header>
            <div class="menu">
                <img alt="" src="images/logo_long_blanc.svg" class="menu-logo"/>
                <button class="menu-toggle" aria-label="Toggle menu">☰</button>
                <div class="menu-link">
                    <a class="langue-en" href="index.html">About us</a>
                    <a class="langue-fr" href="index.html">A propos</a>
                    <a href="services.html">Services</a>
                    <a href="training.html">Training</a>
                    <a href="blog.html">Publication</a>
                    <a class="langue-en" href="contact.html">Contact us</a>
                    <a class="langue-fr" href="contact.html">Nous contacter</a>
                </div>
                <select id="myDropdown" title="Choose a language">
                    <option class="option" value="en">EN</option>
                    <option class="option" value="fr">FR</option>
                </select>
            </div>
        </header>
        <main>
            <section class="hero"></section>
            <section id="article-details">
                <!-- Les détails de l'article seront insérés ici -->
            </section>
            <button id="scrollToTopBtn" title="Go to top">↑</button>
            <footer>
                <div class="footer-top">
                    <div class="footer-title-newsletter">
                        <img src="images/logo_long_blanc.svg" alt="Logo">
                    </div>
                    <div class="permalinks">
                        <a href="contact.html">Contact us</a>
                        <a href="">FAQ</a>
                        <a href="">Privacy policy</a>
                        <a href="">Terms of use</a>
                    </div>
                </div>
                <div class="footer-info">
                    <div class="newsletter">
                        <h3>Subscribe</h3>
                        <p class="langue-en">Stay up to date with all our news by subscribing to our newsletter.</p>
                        <input type="email" class="form-control newsletter-form" id="newsletterEmail"
                            placeholder="email address">
                        <button type="button" class="btn btn-outline-warning" id="registerButton">Submit</button>
                    </div>
                    <div class="list-info">
                        <div class="info">
                            <p>SAPAS Gmbh, Chamerstrasse 172, 6300 Zug</p>
                            <img alt="" class="icon-info-footer" src="images/footer-icon-location.svg">
                        </div>
                        <div class="info">
                            <p>info@sahelpolitica.ch</p>
                            <img alt="" class="icon-info-footer" src="images/footer-icon-email.svg">
                        </div>
                        <div class="info">
                            <p>+41 77 503 63 94</p>
                            <img alt="" class="icon-info-footer" src="images/footer-icon-phone.svg">
                        </div>
                    </div>
    
                </div>
                <div class="copyright">
                    <p><img src="images/copyright.svg" alt=""> sahel policica, 2024, All rights reserved</p>
                    <div class="socials">
                        <a target="_blank" href="https://x.com/SahelPolitica"><img alt="X" src="images/footer-x-icon.svg"></a>
                        <a target="_blank" href="https://www.linkedin.com/company/sahelpolitica/"><img alt="Linkedin"
                                src="images/footer-linkedin-icon.svg"></a>
                    </div>
            </footer>
        </main>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
            import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
    
            const firebaseConfig = {
                apiKey: "API_KEY",
                authDomain: "sahelpolitica.firebaseapp.com",
                projectId: "sahelpolitica",
                storageBucket: "sahelpolitica.appspot.com",
                messagingSenderId: "11417703739",
                appId: "1:11417703739:web:882052b747e7b761bdd31e",
                measurementId: "G-WFFDBTWRKV"
            };
    
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
    
            async function fetchArticle(articleId) {
                const articleDetails = document.getElementById('article-details');
    
                try {
                    const docRef = doc(db, 'Articles', articleId);
                    const docSnap = await getDoc(docRef);
    
                    if (docSnap.exists()) {
                        const article = docSnap.data();
                        articleDetails.innerHTML = `
                            <img alt="" src="${article.imageUrl}" alt="${article.title}" style="width:100%; max-height:400px; object-fit:cover;">
                            <h1 class="langue-en">${article.title}</h1>
                            <h1 class="langue-fr">${article.titleFR}</h1>
                            <p class='article-content langue-en'>${article.content}</p>
                            <p class='article-content langue-fr'>${article.contentFR}</p>
                            <p class="langue-en"><strong>Author:</strong> ${article.author}</p>
                            <p class="langue-fr"><strong>Publié par:</strong> ${article.author}</p>
                            <p><strong>Date:</strong> ${new Date(article.date.seconds * 1000).toLocaleString()}</p>
                        `;
                    } else {
                        articleDetails.innerHTML = '<p>Article not found.</p>';
                    }
                } catch (error) {
                    console.error("Error fetching article: ", error);
                    articleDetails.innerHTML = '<p>Failed to load article.</p>';
                }
            }
    
            document.addEventListener('DOMContentLoaded', () => {
                const urlParams = new URLSearchParams(window.location.search);
                const articleId = urlParams.get('id');
                if (articleId) {
                    fetchArticle(articleId);
                } else {
                    document.getElementById('article-details').innerHTML = '<p>No article ID provided.</p>';
                }
            });
        </script>
        <script>
            // Affiche le bouton lorsque l'utilisateur fait défiler vers le bas de 20 pixels à partir du haut du document
            window.onscroll = function() { scrollFunction() };
        
            function scrollFunction() {
                const scrollToTopBtn = document.getElementById("scrollToTopBtn");
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    scrollToTopBtn.style.display = "block";
                } else {
                    scrollToTopBtn.style.display = "none";
                }
            }
        
            // Lorsque l'utilisateur clique sur le bouton, fait défiler vers le haut de la page
            document.getElementById("scrollToTopBtn").addEventListener("click", function() {
                document.body.scrollTop = 0; // Pour Safari
                document.documentElement.scrollTop = 0; // Pour Chrome, Firefox, IE et Opera
            });
        </script>
        <script src="js/indexJs.js"></script>
        <script src="js/script-language.js"></script>
    </body>
</html>