<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Sahel Politica</title>
        <link href="css/article-detail-page.css" rel="stylesheet">
        <link href="css/footer.css" rel="stylesheet">
        <link href="css/header.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>

    </head>
    <body>
        <header>
            <div class="header-background"></div>
            <div class="menu">
                <p class="menu-logo">
                    <img src="images/logo.png" />
                </p>
                <div class="menu-link">
                    <a href="index.html">About us</a>
                    <a href="services.html">Services</a>
                    <a href="our-team.html">Our team</a>
                    <a href="blog.html">Blog</a>
                    <a href="contact.html">Contact us</a>
                </div>
                
            </div>
        </header>
        <main>
            <section class="hero"></section>
            <section id="article-details">
                <!-- Les détails de l'article seront insérés ici -->
            </section>
            <button id="scrollToTopBtn" title="Go to top">↑</button>
            <footer>
                <div class="footer-contact">
                    <div class="footer-title-newsletter">
                        <h5>Stay up to date with all our news by subscribing to our newsletter.</h5>
                    </div>
                    <div class="footer-mail-form">
                        <div class="mb-3">
                            <label for="exampleFormControlInput1" class="form-label">Email address</label>
                            <input type="email" class="form-control newsletter-form" id="exampleFormControlInput1" placeholder="name@example.com">
                            <a href="blog.html"><button type="button" class="btn btn-outline-light">Register</button></a>
                        </div>
                    </div>
                </div>
                <div class="footer-info">
                    <img class="logo-footer" src="images/logo.png">
                    <div class="footer-list-info">
                        <div class="footer-contact-adress">
                            <img class="icon-info-footer" src="images/map.png">
                            <h4>SAPAS Gmbh, Chamerstrasse 172, 6300 Zug</h4>
                        </div>
                        <div class="footer-contact-mail">
                            <img class="icon-info-footer" src="images/mail-black.png">
                            <h4>info@sahelpolitica.ch</h4>
                        </div>
                        <div class="footer-contact-number">
                            <img class="icon-info-footer" src="images/phone-black.png">
                            <h4>+41 778 12 40 73</h4>
                        </div>
                    </div>
                    <div class="footer-follow-us">
                        <h3>Follow us:</h3>
                        <a href=""><img src="images/facebook.png"></a>
                        <a target="_blank" href="https://www.linkedin.com/company/sahelpolitica/"><img src="images/linkedin.png"></a>
                        <a target="_blank" href="https://x.com/SahelPolitica"><img src="images/twitter-x.png"></a>
                    </div>
                </div>
            </footer>
        </main>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
            import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
    
            const firebaseConfig = {
                apiKey: "API_KEY",
                authDomain: "sahelpolitica.firebaseapp.com",
                projectId: "sahelpolitica",
                storageBucket: "sahelpolitica.appspot.com",
                messagingSenderId: "11417703739",
                appId: "1:11417703739:web:882052b747e7b761bdd31e",
                measurementId: "G-WFFDBTWRKV"
            };
    
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
    
            async function fetchArticle(articleId) {
                const articleDetails = document.getElementById('article-details');
    
                try {
                    const docRef = doc(db, 'Articles', articleId);
                    const docSnap = await getDoc(docRef);
    
                    if (docSnap.exists()) {
                        const article = docSnap.data();
                        articleDetails.innerHTML = `
                            <img src="${article.imageUrl}" alt="${article.title}" style="width:100%; max-height:400px; object-fit:cover;">
                            <h1>${article.title}</h1>
                            <p class='article-content'>${article.content}</p>
                            <p><strong>Author:</strong> ${article.author}</p>
                            <p><strong>Date:</strong> ${new Date(article.date.seconds * 1000).toLocaleString()}</p>
                        `;
                    } else {
                        articleDetails.innerHTML = '<p>Article not found.</p>';
                    }
                } catch (error) {
                    console.error("Error fetching article: ", error);
                    articleDetails.innerHTML = '<p>Failed to load article.</p>';
                }
            }
    
            document.addEventListener('DOMContentLoaded', () => {
                const urlParams = new URLSearchParams(window.location.search);
                const articleId = urlParams.get('id');
                if (articleId) {
                    fetchArticle(articleId);
                } else {
                    document.getElementById('article-details').innerHTML = '<p>No article ID provided.</p>';
                }
            });
        </script>
        <script>
            // Affiche le bouton lorsque l'utilisateur fait défiler vers le bas de 20 pixels à partir du haut du document
            window.onscroll = function() { scrollFunction() };
        
            function scrollFunction() {
                const scrollToTopBtn = document.getElementById("scrollToTopBtn");
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    scrollToTopBtn.style.display = "block";
                } else {
                    scrollToTopBtn.style.display = "none";
                }
            }
        
            // Lorsque l'utilisateur clique sur le bouton, fait défiler vers le haut de la page
            document.getElementById("scrollToTopBtn").addEventListener("click", function() {
                document.body.scrollTop = 0; // Pour Safari
                document.documentElement.scrollTop = 0; // Pour Chrome, Firefox, IE et Opera
            });
        </script>
    </body>
</html>